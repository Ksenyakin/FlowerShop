{"ast":null,"code":"import React,{useEffect,useState}from'react';import UserDropdown from'./UserDropdown';import'./ProfilePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=()=>{const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchUserData=async()=>{try{const response=await fetch('/api/userinfo',{method:'GET',headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error(`Ошибка при загрузке профиля: ${response.statusText}`);}const data=await response.json();setUserData(data);setLoading(false);}catch(err){setError(err.message);setLoading(false);}};fetchUserData();},[]);if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{className:\"error-message\",children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \",error]});}if(!userData){return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"company-name\",children:\"Decor Fleurs\"}),/*#__PURE__*/_jsx(\"nav\",{className:\"nav\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/catalog\",children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/delivery\",children:\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/about\",children:\"\\u041E \\u043D\\u0430\\u0441\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-buttons\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/register\",className:\"button\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"button\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"})]}),/*#__PURE__*/_jsx(UserDropdown,{})]}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u043C\\u044F:\"}),\" \",userData.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"}),\" \",userData.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0410\\u0434\\u0440\\u0435\\u0441:\"}),\" \",userData.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u042D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430:\"}),\" \",userData.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0414\\u0435\\u043D\\u044C \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),\" \",userData.birthday]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0423\\u0440\\u043E\\u0432\\u0435\\u043D\\u044C \\u043B\\u043E\\u044F\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438:\"}),\" \",userData.loyalty_level]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0411\\u043E\\u043D\\u0443\\u0441\\u043D\\u044B\\u0435 \\u0431\\u0430\\u043B\\u043B\\u044B:\"}),\" \",userData.points]})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/update-user\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"})]})]});};export default ProfilePage;","map":{"version":3,"names":["React","useEffect","useState","UserDropdown","jsx","_jsx","jsxs","_jsxs","ProfilePage","userData","setUserData","loading","setLoading","error","setError","fetchUserData","response","fetch","method","headers","localStorage","getItem","ok","Error","statusText","data","json","err","message","children","className","href","name","phone","address","email","birthday","loyalty_level","points"],"sources":["C:/Users/DanKs/GolandProjects/flower-shop-backend/frontend/src/components/ProfilePage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport UserDropdown from './UserDropdown';\r\nimport './ProfilePage.css';\r\n\r\nconst ProfilePage: React.FC = () => {\r\n    const [userData, setUserData] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchUserData = async () => {\r\n            try {\r\n                const response = await fetch('/api/userinfo', {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Ошибка при загрузке профиля: ${response.statusText}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                setUserData(data);\r\n                setLoading(false);\r\n            } catch (err) {\r\n                setError((err as Error).message);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUserData();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <p>Загрузка данных профиля...</p>;\r\n    }\r\n\r\n    if (error) {\r\n        return <p className=\"error-message\">Ошибка: {error}</p>;\r\n    }\r\n\r\n    if (!userData) {\r\n        return <p>Данные пользователя недоступны</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile-page\">\r\n            <header className=\"header\">\r\n                <h1 className=\"company-name\">Decor Fleurs</h1>\r\n                <nav className=\"nav\">\r\n                    <ul>\r\n                        <li><a href=\"/catalog\">Каталог</a></li>\r\n                        <li><a href=\"/delivery\">Доставка</a></li>\r\n                        <li><a href=\"/about\">О нас</a></li>\r\n                    </ul>\r\n                </nav>\r\n                <div className=\"auth-buttons\">\r\n                    <a href=\"/register\" className=\"button\">Регистрация</a>\r\n                    <a href=\"/login\" className=\"button\">Авторизация</a>\r\n                </div>\r\n                <UserDropdown />\r\n            </header>\r\n\r\n            <main>\r\n                <h2>Профиль пользователя</h2>\r\n                <div className=\"profile-info\">\r\n                    <p><strong>Имя:</strong> {userData.name}</p>\r\n                    <p><strong>Телефон:</strong> {userData.phone}</p>\r\n                    <p><strong>Адрес:</strong> {userData.address}</p>\r\n                    <p><strong>Электронная почта:</strong> {userData.email}</p>\r\n                    <p><strong>День рождения:</strong> {userData.birthday}</p>\r\n                    <p><strong>Уровень лояльности:</strong> {userData.loyalty_level}</p>\r\n                    <p><strong>Бонусные баллы:</strong> {userData.points}</p>\r\n                </div>\r\n                <a href=\"/update-user\">Редактировать данные</a>\r\n\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfilePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}