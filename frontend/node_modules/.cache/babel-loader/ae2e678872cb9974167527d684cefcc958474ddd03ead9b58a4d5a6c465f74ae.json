{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./AdminDashboard.css\";// Стили для страницы\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[userRole,setUserRole]=useState(null);const navigate=useNavigate();useEffect(()=>{// Проверяем токен из localStorage\nconst token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");return;}fetch(\"/api/userinfo\",{headers:{Authorization:`Bearer ${token}`}}).then(res=>res.json()).then(data=>{if(data.role!==\"admin\"){navigate(\"/\");}else{setUserRole(data.role);}}).catch(()=>navigate(\"/\"));},[navigate]);if(!userRole){return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-menu\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/admin/products\"),children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/admin/categories\"),children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/admin/orders\"),children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u044B\"})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminDashboard","userRole","setUserRole","navigate","token","localStorage","getItem","fetch","headers","Authorization","then","res","json","data","role","catch","children","className","onClick"],"sources":["C:/Users/DanKs/GolandProjects/flower-shop-backend/frontend/src/pages/admin/AdminDashboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./AdminDashboard.css\"; // Стили для страницы\r\n\r\nconst AdminDashboard: React.FC = () => {\r\n    const [userRole, setUserRole] = useState<string | null>(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        // Проверяем токен из localStorage\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n            navigate(\"/login\");\r\n            return;\r\n        }\r\n\r\n        fetch(\"/api/userinfo\", {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                if (data.role !== \"admin\") {\r\n                    navigate(\"/\");\r\n                } else {\r\n                    setUserRole(data.role);\r\n                }\r\n            })\r\n            .catch(() => navigate(\"/\"));\r\n    }, [navigate]);\r\n\r\n    if (!userRole) {\r\n        return <p>Загрузка...</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-dashboard\">\r\n            <h1>Панель администратора</h1>\r\n            <div className=\"admin-menu\">\r\n                <button onClick={() => navigate(\"/admin/products\")}>Управление товарами</button>\r\n                <button onClick={() => navigate(\"/admin/categories\")}>Категории</button>\r\n                <button onClick={() => navigate(\"/admin/orders\")}>Заказы</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,sBAAsB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,KAAM,CAAAC,cAAwB,CAAGA,CAAA,GAAM,CACnC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAgB,IAAI,CAAC,CAC7D,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAW,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACRD,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACJ,CAEAI,KAAK,CAAC,eAAe,CAAE,CACnBC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUL,KAAK,EAAG,CAChD,CAAC,CAAC,CACGM,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACZ,GAAIA,IAAI,CAACC,IAAI,GAAK,OAAO,CAAE,CACvBX,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAC,IAAM,CACHD,WAAW,CAACW,IAAI,CAACC,IAAI,CAAC,CAC1B,CACJ,CAAC,CAAC,CACDC,KAAK,CAAC,IAAMZ,QAAQ,CAAC,GAAG,CAAC,CAAC,CACnC,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,GAAI,CAACF,QAAQ,CAAE,CACX,mBAAOJ,IAAA,MAAAmB,QAAA,CAAG,qDAAW,CAAG,CAAC,CAC7B,CAEA,mBACIjB,KAAA,QAAKkB,SAAS,CAAC,iBAAiB,CAAAD,QAAA,eAC5BnB,IAAA,OAAAmB,QAAA,CAAI,2HAAqB,CAAI,CAAC,cAC9BjB,KAAA,QAAKkB,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvBnB,IAAA,WAAQqB,OAAO,CAAEA,CAAA,GAAMf,QAAQ,CAAC,iBAAiB,CAAE,CAAAa,QAAA,CAAC,+GAAmB,CAAQ,CAAC,cAChFnB,IAAA,WAAQqB,OAAO,CAAEA,CAAA,GAAMf,QAAQ,CAAC,mBAAmB,CAAE,CAAAa,QAAA,CAAC,wDAAS,CAAQ,CAAC,cACxEnB,IAAA,WAAQqB,OAAO,CAAEA,CAAA,GAAMf,QAAQ,CAAC,eAAe,CAAE,CAAAa,QAAA,CAAC,sCAAM,CAAQ,CAAC,EAChE,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAhB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}