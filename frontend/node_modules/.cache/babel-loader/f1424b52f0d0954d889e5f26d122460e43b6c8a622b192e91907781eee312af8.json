{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import AdminHeader from\"./AdminHeader\";// ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç\nimport\"./ProductsAdmin.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductsAdmin=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[selectedImage,setSelectedImage]=useState(null);const navigate=useNavigate();useEffect(()=>{fetch(\"/api/products\").then(res=>res.json()).then(data=>{console.log(\"üì¶ –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:\",data);setProducts(Array.isArray(data)?data:[]);setLoading(false);}).catch(err=>{console.error(\"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:\",err);setLoading(false);});},[]);const handleDelete=async id=>{if(!window.confirm(\"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?\"))return;try{const response=await fetch(`/api/products/${id}`,{method:\"DELETE\",headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});if(!response.ok)throw new Error(\"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞\");setProducts(products.filter(product=>product.id!==id));}catch(error){console.error(\"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:\",error);}};if(loading)return/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AdminHeader,{title:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page-content\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/admin/products/new\"),className:\"add-btn\",children:\"\\u2795 \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"}),products.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"products-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0424\\u043E\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:product.image_url,alt:product.name,className:\"product-image\",onClick:()=>setSelectedImage(product.image_url)})}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.description}),/*#__PURE__*/_jsxs(\"td\",{children:[product.price,\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"td\",{children:product.stock}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(`/admin/products/edit/${product.id}`),children:\"\\u270F\\uFE0F \\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product.id),children:\"\\uD83D\\uDDD1 \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},product.id))})]}),selectedImage&&/*#__PURE__*/_jsx(\"div\",{className:\"image-overlay\",onClick:()=>setSelectedImage(null),children:/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:selectedImage,alt:\"\\u0422\\u043E\\u0432\\u0430\\u0440\"})})})]})]});};export default ProductsAdmin;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","AdminHeader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductsAdmin","products","setProducts","loading","setLoading","selectedImage","setSelectedImage","navigate","fetch","then","res","json","data","console","log","Array","isArray","catch","err","error","handleDelete","id","window","confirm","response","method","headers","Authorization","localStorage","getItem","ok","Error","filter","product","children","title","className","onClick","length","map","src","image_url","alt","name","description","price","stock"],"sources":["C:/Users/DanKs/GolandProjects/flower-shop-backend/frontend/src/pages/admin/ProductsAdmin.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport AdminHeader from \"./AdminHeader\"; // ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç\r\nimport \"./ProductsAdmin.css\";\r\n\r\ninterface Product {\r\n    id: number;\r\n    name: string;\r\n    description: string;\r\n    price: number;\r\n    stock: number;\r\n    image_url: string;\r\n}\r\n\r\nconst ProductsAdmin: React.FC = () => {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedImage, setSelectedImage] = useState<string | null>(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetch(\"/api/products\")\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                console.log(\"üì¶ –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:\", data);\r\n                setProducts(Array.isArray(data) ? data : []);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                console.error(\"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:\", err);\r\n                setLoading(false);\r\n            });\r\n    }, []);\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (!window.confirm(\"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?\")) return;\r\n\r\n        try {\r\n            const response = await fetch(`/api/products/${id}`, {\r\n                method: \"DELETE\",\r\n                headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n            });\r\n\r\n            if (!response.ok) throw new Error(\"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞\");\r\n\r\n            setProducts(products.filter((product) => product.id !== id));\r\n        } catch (error) {\r\n            console.error(\"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:\", error);\r\n        }\r\n    };\r\n\r\n    if (loading) return <h1>–ó–∞–≥—Ä—É–∑–∫–∞...</h1>;\r\n\r\n    return (\r\n        <>\r\n            <AdminHeader title=\"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏\" />\r\n            <div className=\"admin-page-content\">\r\n                <button onClick={() => navigate(\"/admin/products/new\")} className=\"add-btn\">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>\r\n\r\n                {products.length === 0 ? <p>–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</p> : (\r\n                    <table className=\"products-table\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>–§–æ—Ç–æ</th>\r\n                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>\r\n                            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>\r\n                            <th>–¶–µ–Ω–∞</th>\r\n                            <th>–û—Å—Ç–∞—Ç–æ–∫</th>\r\n                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                                <td>\r\n                                    <img\r\n                                        src={product.image_url}\r\n                                        alt={product.name}\r\n                                        className=\"product-image\"\r\n                                        onClick={() => setSelectedImage(product.image_url)}\r\n                                    />\r\n                                </td>\r\n                                <td>{product.name}</td>\r\n                                <td>{product.description}</td>\r\n                                <td>{product.price} ‚ÇΩ</td>\r\n                                <td>{product.stock}</td>\r\n                                <td>\r\n                                    <button onClick={() => navigate(`/admin/products/edit/${product.id}`)}>‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button>\r\n                                    <button onClick={() => handleDelete(product.id)}>üóë –£–¥–∞–ª–∏—Ç—å</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n\r\n                {/* –û–≤–µ—Ä–ª–µ–π –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ç–æ */}\r\n                {selectedImage && (\r\n                    <div className=\"image-overlay\" onClick={() => setSelectedImage(null)}>\r\n                        <div className=\"image-container\">\r\n                            <img src={selectedImage} alt=\"–¢–æ–≤–∞—Ä\" />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ProductsAdmin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}